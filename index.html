<!DOCTYPE html>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>GIPHY Unit</title>
  <link rel="stylesheet" href="assets/style.css">
</head>

<body>
  <button data-genre="action">Action</button>
  <button data-genre="adventure">Adventure</button>
  <button data-genre="comedy">Comedy</button>
  <button data-genre="crime">Crime</button>
  <button data-genre="drama">Drama</button>
  <button data-genre="fantasy">Fantasy</button>
  <button data-genre="historical">Historical</button>
  <button data-genre="horror">Horror</button>
  <button data-genre="mystery">Mystery</button>
  <button data-genre="philosophical">Philosophical</button>
  <button data-genre="political">Political</button>
  <button data-genre="romance">Romance</button>
  <button data-genre="satire">Satire</button>
  <button data-genre="thriller">Thriller</button>
  <button data-genre="western">Western</button>
  <form>
    <label for="genre-input">Add Genre:</label>
    <input type="text" id="genre-input">
    <br>
    <!-- Button triggers new movie to be added -->
    <input id="add-genre" type="submit" value="Search">
  </form>
  <div id="gif-display"></div>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script type="text/javascript">
    //add click listener
    $("button").on("click", function () {
      var genre = $(this).attr("data-genre");
      var queryURL = "https://api.giphy.com/v1/gifs/search?q=" + genre + "&api_key=j0SEnv1AyCa4wkjDuhzl7HVWrJ4ZQCIg";

      $.ajax({
        url: queryURL,
        method: "GET"
      })
        .then(function (response) {
          console.log(queryURL);
          console.log(response);

          var results = response.data;

          for (var i = 0; i < results.length; i++) {
            var genreDiv = $("<div>");
            var p = $("<p>").text("Rating: " + results[i].rating);
            var genreImage = $("<img>");

            genreImage.attr("src", results[i].images.fixed_width.url);
            genreDiv.append(p);
            genreDiv.append(genreImage);

            $("#gif-display").prepend(genreDiv);
          }
        });
    });
  </script>

</body>